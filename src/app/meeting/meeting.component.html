<div class="d-flex flex-column h-100">
    <div class="conference-section flex-grow-1">
        @if (!room()) {
            <div>Joining Please wait ...</div>
        } @else {
            <div id="room" class="w-100">
                <div id="room-header">
                    <h2 id="room-title">{{ roomForm.value.roomName }}</h2>
                </div>
                <div id="layout-container" class="video-preview-container">
                    @if (localTrack()) {
                        <video-component
                        [track]="localTrack()!"
                        [participantIdentity]="roomForm.value.participantName!"
                        [local]="true"
                        ></video-component>
                    }
                    @for (remoteTrack of remoteTracksMap().values(); track remoteTrack.trackPublication.trackSid) {
                        @if (remoteTrack.trackPublication.kind === 'video') {
                            <video-component
                            [track]="remoteTrack.trackPublication.videoTrack!"
                            [participantIdentity]="remoteTrack.participantIdentity"
                            ></video-component>
                        } @else {
                            <audio-component [track]="remoteTrack.trackPublication.audioTrack!" hidden></audio-component>
                        }
                    }
                </div>
            </div>
        }
    </div>
    
    <!-- Bottom 10% Area: Controls -->
    <div class="footer-section">
        <div class="footer-left">
            <span class="time">12:58 PM</span>
            <span class="room-code">| dcn-gdaa-ztf</span>
        </div>

        <div class="footer-center">
            <button class="footer-btn">
                <!-- More Options -->
                <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="white">
                    <circle cx="5" cy="12" r="2"/>
                    <circle cx="12" cy="12" r="2"/>
                    <circle cx="19" cy="12" r="2"/>
                </svg>
            </button>

            <button class="footer-btn active" (click)="toggleMic()">                
                <!-- Mute Mic -->
                @if (isMicOn()) {
                     <!-- UnMute Mic -->
                     <svg width="256px" height="256px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                         <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                         <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                         <g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M14.75 7.33303V11.222C14.7728 12.4877 13.7657 13.5325 12.5 13.556C11.2343 13.5325 10.2271 12.4877 10.25 11.222V7.33303C10.2277 6.06772 11.2347 5.02357 12.5 5.00003C13.7653 5.02357 14.7723 6.06772 14.75 7.33303Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M8.46233 13.8534C8.13618 13.5981 7.66478 13.6555 7.40945 13.9817C7.15411 14.3078 7.21152 14.7792 7.53767 15.0346L8.46233 13.8534ZM17.4623 15.0346C17.7885 14.7792 17.8459 14.3078 17.5906 13.9817C17.3352 13.6555 16.8638 13.5981 16.5377 13.8534L17.4623 15.0346ZM13.25 16C13.25 15.5858 12.9142 15.25 12.5 15.25C12.0858 15.25 11.75 15.5858 11.75 16H13.25ZM11.75 19C11.75 19.4142 12.0858 19.75 12.5 19.75C12.9142 19.75 13.25 19.4142 13.25 19H11.75ZM7.53767 15.0346C10.4524 17.3164 14.5476 17.3164 17.4623 15.0346L16.5377 13.8534C14.1661 15.7101 10.8339 15.7101 8.46233 13.8534L7.53767 15.0346ZM11.75 16V19H13.25V16H11.75Z" fill="#000000"></path> </g>
                     </svg>
                } @else { 
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier"> <path d="M8.46233 13.8534C8.13618 13.5981 7.66478 13.6555 7.40945 13.9817C7.15411 14.3078 7.21152 14.7792 7.53767 15.0346L8.46233 13.8534ZM17.4623 15.0346C17.7885 14.7792 17.8459 14.3078 17.5906 13.9817C17.3352 13.6555 16.8638 13.5981 16.5377 13.8534L17.4623 15.0346ZM13.25 16C13.25 15.5858 12.9142 15.25 12.5 15.25C12.0858 15.25 11.75 15.5858 11.75 16H13.25ZM11.75 19C11.75 19.4142 12.0858 19.75 12.5 19.75C12.9142 19.75 13.25 19.4142 13.25 19H11.75ZM19.5303 5.53033C19.8232 5.23744 19.8232 4.76256 19.5303 4.46967C19.2374 4.17678 18.7626 4.17678 18.4697 4.46967L19.5303 5.53033ZM10.4897 12.4497C10.1968 12.7426 10.1968 13.2174 10.4897 13.5103C10.7826 13.8032 11.2574 13.8032 11.5503 13.5103L10.4897 12.4497ZM4.46967 18.4697C4.17678 18.7626 4.17678 19.2374 4.46967 19.5303C4.76256 19.8232 5.23744 19.8232 5.53033 19.5303L4.46967 18.4697ZM11.5503 13.5103C11.8432 13.2174 11.8432 12.7426 11.5503 12.4497C11.2574 12.1568 10.7826 12.1568 10.4897 12.4497L11.5503 13.5103ZM11.526 12.4264C11.2202 12.1469 10.7458 12.1683 10.4664 12.474C10.1869 12.7798 10.2083 13.2542 10.514 13.5336L11.526 12.4264ZM12.5 13.556L12.4986 14.306C12.5037 14.306 12.5088 14.306 12.5139 14.3059L12.5 13.556ZM14.75 11.222H13.9999L14.0001 11.2355L14.75 11.222ZM15.5 9.25C15.5 8.83579 15.1642 8.5 14.75 8.5C14.3358 8.5 14 8.83579 14 9.25H15.5ZM9.5 10.274C9.5 10.6882 9.83579 11.024 10.25 11.024C10.6642 11.024 11 10.6882 11 10.274H9.5ZM10.25 7.334L11.0001 7.334L10.9999 7.32046L10.25 7.334ZM12.5 5L12.5057 4.25002C12.4991 4.24997 12.4926 4.25001 12.4861 4.25013L12.5 5ZM13.8253 6.59048C14.0061 6.96312 14.4548 7.11859 14.8275 6.93773C15.2001 6.75687 15.3556 6.30817 15.1747 5.93552L13.8253 6.59048ZM7.53767 15.0346C10.4524 17.3164 14.5476 17.3164 17.4623 15.0346L16.5377 13.8534C14.1661 15.7101 10.8339 15.7101 8.46233 13.8534L7.53767 15.0346ZM11.75 16V19H13.25V16H11.75ZM18.4697 4.46967L10.4897 12.4497L11.5503 13.5103L19.5303 5.53033L18.4697 4.46967ZM5.53033 19.5303L11.5503 13.5103L10.4897 12.4497L4.46967 18.4697L5.53033 19.5303ZM10.514 13.5336C11.0563 14.0292 11.764 14.3046 12.4986 14.306L12.5014 12.806C12.1403 12.8053 11.7925 12.67 11.526 12.4264L10.514 13.5336ZM12.5139 14.3059C14.1936 14.2746 15.5302 12.8882 15.4999 11.2085L14.0001 11.2355C14.0155 12.0873 13.3378 12.7903 12.4861 12.8061L12.5139 14.3059ZM15.5 11.222L15.5 9.25H14V11.222H15.5ZM11 10.274V7.334H9.5V10.274H11ZM10.9999 7.32046C10.9845 6.46875 11.6622 5.76571 12.5139 5.74987L12.4861 4.25013C10.8064 4.28136 9.46979 5.66785 9.50012 7.34754L10.9999 7.32046ZM12.4943 5.74998C13.0617 5.75428 13.5775 6.08003 13.8253 6.59048L15.1747 5.93552C14.6779 4.91189 13.6435 4.25864 12.5057 4.25002L12.4943 5.74998Z" fill="#000000"></path> </g>
                    </svg>
                }
            </button>

            <button class="footer-btn active" (click)="toggleCamera()">
                <!-- Camera -->
                @if(isCameraOn()) {
                    <svg fill="#000000" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier"> <path d="M242.00781,76.54a3.99817,3.99817,0,0,0-3.99219-.0127L188,105.10767V92a36.04061,36.04061,0,0,0-36-36H24A12.01312,12.01312,0,0,0,12,68v96a36.04061,36.04061,0,0,0,36,36H176a12.01312,12.01312,0,0,0,12-12V150.89233l50.01562,28.58033A3.99931,3.99931,0,0,0,244,176V80A4.00041,4.00041,0,0,0,242.00781,76.54ZM180,188a4.004,4.004,0,0,1-4,4H48a28.03146,28.03146,0,0,1-28-28V68a4.004,4.004,0,0,1,4-4H152a28.03146,28.03146,0,0,1,28,28Zm56-18.89258L188,141.6792V114.3208l48-27.42822Z"></path> </g>
                    </svg>
                } @else {
                    <svg fill="#000000" viewBox="0 0 256 256" id="Flat" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier"> <path d="M242.00781,76.54a4.00053,4.00053,0,0,0-3.99219-.0127L188,105.10791V92a36.04061,36.04061,0,0,0-36-36H110.88281a4,4,0,0,0,0,8H152a28.03146,28.03146,0,0,1,28,28v52a3.98962,3.98962,0,0,0,.07178.71191c.011.06153.023.12159.03686.18213a4.00925,4.00925,0,0,0,.202.65088c.00891.021.02087.04.03015.06055a3.99756,3.99756,0,0,0,.29663.54687c.03369.05225.06751.10352.10339.15381a3.97539,3.97539,0,0,0,.423.5127l.00976.01123a4.05665,4.05665,0,0,0,.52.4292c.05371.03808.1084.07324.16394.1084.05359.03418.10267.07324.15808.105l56,32A3.99931,3.99931,0,0,0,244,176V80A4.00041,4.00041,0,0,0,242.00781,76.54ZM236,169.10742l-48-27.42871V114.32129l48-27.42871ZM37.86914,21.30957a4,4,0,1,0-5.91992,5.38086L58.59424,56H24A12.01312,12.01312,0,0,0,12,68v96a36.04061,36.04061,0,0,0,36,36H176a11.97547,11.97547,0,0,0,9.37976-4.53613L221.04,234.69043a4,4,0,1,0,5.91992-5.38086ZM176,192H48a28.03146,28.03146,0,0,1-28-28V68a4.004,4.004,0,0,1,4-4H65.86694L179.76758,189.291A3.992,3.992,0,0,1,176,192Z"></path> </g>
                    </svg>
                }
            </button>

            <button class="footer-btn">
                <!-- Screen Share -->
                <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="white">
                    <path d="M3 5h18q.825 0 1.413.587Q23 6.175 23 7v10q0 .825-.587 1.413Q21.825 19 21 19H3q-.825 0-1.412-.587Q1 17.825 1 17V7q0-.825.588-1.413Q2.175 5 3 5Zm0 2v10h18V7Z"/>
                    <path d="M12 15q-.425 0-.713-.287Q11 14.425 11 14V11.825L9.4 13.4 8 12l4-4 4 4-1.4 1.4-1.6-1.6V14q0 .425-.287.713Q12.425 15 12 15Z"/>
                </svg>
            </button>

            <button class="footer-btn">
                <!-- Raise Hand -->
                <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="white">
                    <path d="M12 2q.825 0 1.413.588Q14 3.175 14 4v8q0 .825-.587 1.412Q12.825 14 12 14t-1.413-.588Q10 12.825 10 12V4q0-.825.587-1.412Q11.175 2 12 2Z"/>
                    <path d="M17 6q.825 0 1.412.587Q19 7.175 19 8v8q0 .825-.588 1.412Q17.825 18 17 18q-.825 0-1.412-.588Q15 16.825 15 16V8q0-.825.588-1.412Q16.175 6 17 6Z"/>
                    <path d="M7 10q.825 0 1.412.588Q9 11.175 9 12v4q0 .825-.588 1.413Q7.825 18 7 18q-.825 0-1.412-.587Q5 16.825 5 16v-4q0-.825.588-1.412Q6.175 10 7 10Z"/>
                </svg>
            </button>

            <button class="footer-btn end-call" (click)="leaveRoom()">
                <!-- End Call -->
                <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="white">
                    <path d="M4 14q0-.825.587-1.412Q5.175 12 6 12h3q.825 0 1.413.588Q11 13.175 11 14v3q0 .825-.587 1.412Q9.825 19 9 19H6q-.825 0-1.412-.588Q4 17.825 4 17Zm10 0q0-.825.588-1.412Q15.175 12 16 12h3q.825 0 1.412.588Q21 13.175 21 14v3q0 .825-.588 1.412Q20.175 19 19 19h-3q-.825 0-1.412-.588Q14 17.825 14 17Z"/>
                    <path d="M12 10q-3.95 0-7.4 1.175-1.05.375-1.8 1.2Q2 13.2 2 14.3v5q0 .425.288.712Q2.575 20.3 3 20.3h18q.425 0 .713-.288Q22 19.725 22 19.3v-5q0-1.1-.8-1.925-.75-.825-1.8-1.2Q15.95 10 12 10Z"/>
                </svg>
            </button>
        </div>

        <div class="footer-right">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" fill="white">
                <path d="M12 21q-.825 0-1.412-.588Q10 19.825 10 19V9q0-.825.588-1.412Q11.175 7 12 7t1.412.588Q14 8.175 14 9v10q0 .825-.588 1.412Q12.825 21 12 21Zm-6-4q-.825 0-1.412-.587Q4 15.825 4 15V9q0-.825.588-1.412Q5.175 7 6 7t1.412.588Q8 8.175 8 9v6q0 .825-.588 1.413Q6.825 17 6 17Zm12 0q-.825 0-1.412-.587Q16 15.825 16 15V9q0-.825.588-1.412Q17.175 7 18 7t1.412.588Q20 8.175 20 9v6q0 .825-.588 1.413Q18.825 17 18 17Z"/>
            </svg>
        </div>
    </div>
</div>